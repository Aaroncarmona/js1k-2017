I=x=>(x+360)%360;l=(x,y,z)=>x<y&&y<z;u=(x,y)=>l(0,y/6%51,1)?70:y%6&&(x+(y/6|0)%2*6)%12&&(u(x+1,y)?80:60);w=x=>x/60|0;B=[M=Math];for(r=i=120;n=v=r--;)B[r]=r*28%64<39-r/4;for(t=[e=360];e--;)for(t[e]=[f=s=1230];f--;)t[e][f]=f&&f<42&l(126,e,150)?40-e%3:B[w(f)*6+w(e)]&&(l(24,f%60,30)&l(0,e%60,36)?90:l(30,f%60,54)&l(6,e%60,30))||u(e,f);k=M.min;$=2;p=-20;S=[];onkeydown=onkeyup=e=>{S[R=e.which-37]=e.type[5];$=R%2?$:R};setInterval(e=>{o=I(o-!!S[0]*4+!!S[2]*4);r=-k(S[1]&&i&&i--?5:10,1-r);n+=r;p+=(y=n-p)>110?y-110:y<5?y-5:0;if(v=n>1228)n=S[2]=s,r=0;if(r<0&B[w(n)*6+w(I(98+o))]&l(r,n%60-30,1)&l(0,(o+38)%60,52))n+=30-n%60,r=14;r=n>0?r:14;(x=>{for(;x--;)for(e=I($?x-53:69-x),y=160;y--;)f=y+p-n,color=l(n,y+p,n+24)&l(52,x,68)&!(f<0|47-e<f*2|f<20-e*3&f>e*5-4|e*2>37-f&e+4>f)?e+7-f?e*2>30-f&e+4>f?99:9:30:p<-y?9+y+p:p+y>s?v?M.atan2(120-y,x-60)*8+o/9*M.PI&1&&40:10:M.sin(a=M.acos(x/60%2-1))*40-60+t[I((1-a/M.PI)*180+o|0)][y+p],d=k(1,-k(0,M.hypot(60-x,n-y-p+12)/12-2))*i,c.fillStyle=`hsl(${240+d},20%,${color+d/6}%)`,c.fillRect(x*4,640-y*4,4,4)})(120)},o=42)