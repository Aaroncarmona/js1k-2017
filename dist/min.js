h=(x,y,z)=>(x+360)%360;l=(x,y,z)=>x<y&y<z;v=(x,y,z)=>l(0,y/6%51,1)?7:y%6&&(x+(y/6&1)*6)%12&&(v(x+1,y)?8:6);M=(x,y,z)=>x/60|0;B=(x,y,z)=>(z=M(y)*6+M(x))*28%64<39-z/4;u=(x,y,z)=>M(y)-19||p%60<30;for(p=360;k=Q=p--;n=-12)for(t[p]=[r=s=1231];r--;)t[p][r]=r<42&l(126,p,S=150)?p&3:B(p,r)&&(l(24,r%60,30)&l(0,p%60,36)?9:l(30,r%60,54)&l(6,p%60,30))||v(p,r);onkeydown=onkeyup=(x,y,z)=>c[39-x.which]=x.type[5];setInterval(x=(x,y,z)=>{p++;w=!c[2]-!c[0];I=h(I+w*4);k+=r=-Math.min(c[1]&&S&&S--?3:10,1-r);n+=(y=k-n)>110?y-110:y<5&&y-5;Q=k>1228?k=c[r=0]=s:0;if(u(k)&&B(h(98+I),k)&l(r,k%60-30,1)&l(0,(I+38)%60,52))k+=30-k%60,r=14;(x=(x,y,z)=>{for(k>0||(r=14,k=-2);x--;)for(e=h(~w?x-53:69-x),y=160;y--;c.fillRect(x*4,636-y*4,4,4))z=n+y,d=Math.min(1,-Math.min(0,Math.hypot(60-x,12-z+k)/12-2))*S,c.fillStyle=`hsl(${240+d},25%,${d/6+9*(l(0,f=z-k+!Q*Math.sin(x/2)*(14-Math.hypot(r))/8|0,24)&l(52,x,68)&!(f<0|47-e<f*2|f/3<6-e&f>e*5-4|e*2>37-f&e+4>f)?e+7-f?e*2>30-f&e+4>f?9:1:3:z<0?2+z/6:z>s?Q?Math.atan2(120-y,x-60)*8+I/9*Math.PI&1&&4:1:Math.sin(a=Math.acos(x/60%2-1))*4-6+t[h((1-a/Math.PI)*180+I|0)][u(z)?z:z%12+60])}%)`})(120)},I=42)