i=(x,y,z)=>(x+360)%360;l=(x,y,z)=>x<y&y<z;Q=(x,y,z)=>l(0,y/6%51,1)?7:y%6&&(x+(y/6&1)*6)%12&&(Q(x+1,y)?8:6);R=(x,y,z)=>x/60|0;B=(x,y,z)=>(z=R(y)*6+R(x))*28%64<39-z/4;v=(x,y,z)=>R(y)-19||r%60<30;u=[({min:h,sin:p,hypot:S,PI:k}=M=Math)];for(r=360;I=A=r--;o=-12)for(u[r]=[s=t=1231];s--;)u[r][s]=s<42&l(126,r,$=150)?r&3:B(r,s)&&(l(24,s%60,30)&l(0,r%60,36)?9:l(30,s%60,54)&l(6,r%60,30))||Q(r,s);onkeydown=onkeyup=(x,y,z)=>c[39-x.which]=x.type[5];setInterval(x=(x,y,z)=>{r++;w=!c[2]-!c[0];n=i(n+w*4);I+=s=-h(c[1]&&$&&$--?3:10,1-s);o+=(y=I-o)>110?y-110:y<5&&y-5;A=I>1228?I=c[s=0]=t:0;if(v(I)&&B(i(98+n),I)&l(s,I%60-30,1)&l(0,(n+38)%60,52))I+=30-I%60,s=14;(x=(x,y,z)=>{for(I>0||(s=14,I=-2);x--;)for(e=i(~w?x-53:69-x),y=160;y--;c.fillRect(x*4,636-y*4,4,4))z=o+y,d=h(1,-h(0,S(60-x,12-z+I)/12-2))*$,c.fillStyle=`hsl(${240+d},25%,${d/6+9*(l(0,f=z-I+!A*p(x/2)*(14-S(s))/8|0,24)&l(52,x,68)&!(f<0|47-e<f*2|f/3<6-e&f>e*5-4|e*2>37-f&e+4>f)?e+7-f?e*2>30-f&e+4>f?9:1:3:z<0?2+z/6:z>t?A?M.atan2(120-y,x-60)*8+n/9*k&1&&4:1:p(a=M.acos(x/60%2-1))*4-6+u[i((1-a/k)*180+n|0)][v(z)?z:z%12+60])}%)`})(120)},n=42)