R=30;$=60;l=x=>(x+S)%S;k=(x,y,z)=>x<y&y<z;u=(x,y)=>k(0,y/6%51,1)?70:y%6&&(x+(y/6|0)%2*6)%12&&(u(x+1,y)?80:$);P=x=>x/$|0;C=[M=Math];for(r=i=120;n=v=r--;)C[r]=r*28%64<39-r/4;for(t=[e=S=360];e--;)for(t[e]=[f=s=1231];f--;)t[e][f]=f<42&k(126,e,150)?40-e%3:C[P(f)*6+P(e)]&&(k(24,f%$,R)&k(0,e%$,36)?90:k(R,f%$,54)&k(6,e%$,R))||u(e,f);I=M.min;p=-20;h=[];onkeydown=onkeyup=e=>h[39-e.which]=e.type[5];setInterval(e=>{w=!h[2]-!h[0];o=l(o+w*4);r=-I(h[1]&&i&&i--?5:10,1-r);n+=r;p+=(y=n-p)>110?y-110:y<5?y-5:0;if(v=n>1228)n=h[r=0]=s;if(C[P(n)*6+P(l(98+o))]&k(r,n%$-R,1)&k(0,(o+38)%$,52))n+=R-n%$,r=14;(x=>{for(n>0||(r=14,n=-2);x--;)for(e=l(~w?x-53:69-x),y=160;y--;c.fillRect(x*4,640-y*4,4,4))z=p+y,d=I(1,-I(0,M.hypot($-x,12-z+n)/12-2))*i,c.fillStyle=`hsl(${240+d},25%,${d/6+(k(0,f=z-n+!v*M.sin(x/2)*(14-M.abs(r))/8|0,24)&k(52,x,68)&!(f<0|47-e<f*2|f<20-e*3&f>e*5-4|e*2>37-f&e+4>f)?e+7-f?e*2>R-f&e+4>f?99:9:R:z<0?9+z:z>s?v?M.atan2(120-y,x-$)*8+o/9*M.PI&1&&40:10:M.sin(a=M.acos(x/$%2-1))*40-$+t[l((1-a/M.PI)*180+o|0)][z])}%)`})(120)},o=42)