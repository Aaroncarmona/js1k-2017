R=30;$=60;I=x=>(x+S)%S;k=(x,y,z)=>x<y&y<z;t=(x,y)=>k(0,y/6%51,1)?7:y%6&&(x+(y/6&1)*6)%12&&(t(x+1,y)?8:6);P=x=>x/$|0;v=[M=Math];for(p=h=120;l=u=p--;)v[p]=p*28%64<39-p/4;for(s=[e=S=360];e--;)for(s[e]=[f=r=1231];f--;)s[e][f]=f<42&k(126,e,150)?1+e%3:v[P(f)*6+P(e)]&&(k(24,f%$,R)&k(0,e%$,36)?9:k(R,f%$,54)&k(6,e%$,R))||t(e,f);i=M.min;o=-20;b=[];onkeydown=onkeyup=e=>b[39-e.which]=e.type[5];setInterval(e=>{w=!b[2]-!b[0];n=I(n+w*4);p=-i(b[1]&&h&&h--?5:10,1-p);l+=p;o+=(y=l-o)>110?y-110:y<5&&y-5;if(u=l>1228)l=b[p=0]=r;if(v[P(l)*6+P(I(98+n))]&k(p,l%$-R,1)&k(0,(n+38)%$,52))l+=R-l%$,p=14;(x=>{for(l>0||(p=14,l=-2);x--;)for(e=I(~w?x-53:69-x),y=160;y--;c.fillRect(x*4,640-y*4,4,4))z=o+y,d=i(1,-i(0,M.hypot($-x,12-z+l)/12-2))*h,c.fillStyle=`hsl(${240+d},25%,${d/6+9*(k(0,f=z-l+!u*M.sin(x/2)*(14-M.abs(p))/8|0,24)&k(52,x,68)&!(f<0|47-e<f*2|f<20-e*3&f>e*5-4|e*2>37-f&e+4>f)?e+7-f?e*2>R-f&e+4>f?9:1:3:z<0?2+z/6:z>r?u?M.atan2(120-y,x-$)*8+n/9*M.PI&1&&4:1:M.sin(a=M.acos(x/$%2-1))*4-6+s[I((1-a/M.PI)*180+n|0)][z])}%)`})(120)},n=42)